{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load staticfiles %}


{% block head_title %} fishrail
{% endblock %}

<style>
    {% block style %}
        .jumbotron {
            background-color: #A;
            color: #9B9A9B;
        }
    {% endblock  %}
</style>

{% block jumbotron %}
    {% if not request.user.is_authenticated %}
    <!-- Main component for a primary marketing message or call to action -->
    <div class="jumbotron">
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <h1>Welcome</h1>
                    <p>Welcome to Fishrail</p>
                    <p>
                        <a class="btn btn-lg btn-primary" href="../../components/#navbar" role="button">Join us!
                            (Free)&raquo;</a>
                    </p>
                </div>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/QKz8PPFYhe0" frameborder="0"
                        allowfullscreen></iframe>

            </div>
        </div>
    </div>
    </div>
    {% endif %}
{% endblock %}

{% block content %}
    {% if request.user.is_authenticated %}
        You are logged in!
        <br>
        <input class="btn  btn-primary" type="execute" value="Determine trending"/>
        <br>
     <head>
        <meta charset="utf-8">
        <title>My First Chart</title>
        <link href={% static 'css/nv.d3.css' %} rel="stylesheet" type="text/css">
        <script src={% static 'js/d3.v3.js' %}></script>
        <script src={% static 'js/nv.d3.js' %}></script>
        <script src={% static 'js/nv.d3.min.js' %}></script>
        <script src={% static 'js/d3-jetpack.js' %}></script>
{#        <style type="text/css">#}
{#        body { font-family: 'Helvetica Neue', Helvetica; font-weight: 300; padding: 20px;}#}
{#        th { text-align: left; }#}
{#        th, td { padding: 0 1em 0.5ex 0;}#}
{#        th.center, td.center { text-align: center; }#}
{#        th.num, td.num { text-align: right; }#}
    </head>
    <body>
        <svg style='height:600px'/>
        <script>
            var url_to_data = "{% static "js/stackedAreaData.json" %}"
        </script>
        <script src={% static 'js/mychart.js' %}></script>

        <script>

    // the table rows, typically loaded from data file using d3.csv
    var movies = [
        { title: "The Godfather", year: 1972, length: 175, budget: 6000000, rating: 9.1 },
        { title: "The Shawshank Redemption", year: 1994, length: 142, budget: 25000000, rating: 9.1 },
        { title: "The Lord of the Rings: The Return of the King", year: 2003, length: 251, budget: 94000000, rating: 9 },
        { title: "The Godfather: Part II", year: 1974, length: 200, budget: 13000000, rating: 8.9 },
        { title: "Shichinin no samurai", year: 1954, length: 206, budget: 500000, rating: 8.9 },
        { title: "Buono, il brutto, il cattivo, Il", year: 1966, length: 180, budget: 1200000, rating: 8.8 },
        { title: "Casablanca", year: 1942, length: 102, budget: 950000, rating: 8.8 },
        { title: "The Lord of the Rings: The Fellowship of the Ring", year: 2001, length: 208, budget: 93000000, rating: 8.8 },
        { title: "The Lord of the Rings: The Two Towers", year: 2002, length: 223, budget: 94000000, rating: 8.8 },
        { title: "Pulp Fiction", year: 1994, length: 168, budget: 8000000, rating: 8.8 }
    ];

    // column definitions
    var columns = [
        { head: 'Movie title', cl: 'title', html: ƒ('title') },
        { head: 'Year', cl: 'center', html: ƒ('year') },
        { head: 'Length', cl: 'center', html: ƒ('length', length()) },
        { head: 'Budget', cl: 'num', html: ƒ('budget', d3.format('$,')) },
        { head: 'Rating', cl: 'num', html: ƒ('rating', d3.format('.1f')) }
    ];

    // create table
    var table = d3.select('body')
        .append('table');

    // create table header
    table.append('thead').append('tr')
        .selectAll('th')
        .data(columns).enter()
        .append('th')
        .attr('class', ƒ('cl'))
        .text(ƒ('head'));

    // create table body
    table.append('tbody')
        .selectAll('tr')
        .data(movies).enter()
        .append('tr')
        .selectAll('td')
        .data(function(row, i) {
            return columns.map(function(c) {
                // compute cell values for this specific row
                var cell = {};
                d3.keys(c).forEach(function(k) {
                    cell[k] = typeof c[k] == 'function' ? c[k](row,i) : c[k];
                });
                return cell;
            });
        }).enter()
        .append('td')
        .html(ƒ('html'))
        .attr('class', ƒ('cl'));

    function length() {
        var fmt = d3.format('02d');
        return function(l) { return Math.floor(l / 60) + ':' + fmt(l % 60) + ''; };
    }


    </script>
    </body>


{#        <head>#}
{#            <title>Vega Scaffold</title>#}
{#            <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>#}
{#            <script src="http://d3js.org/topojson.v1.min.js"></script>#}
{#            <script src="http://d3js.org/d3.geo.projection.v0.min.js" charset="utf-8"></script>#}
{#            <script src="http://trifacta.github.com/vega/vega.js"></script>#}
{#        </head>#}
{#        <body>#}
{#            <div id="vis"></div>#}
{#        </body>#}
{#        <script type="text/javascript">#}
{#        // parse a spec and create a visualization view#}
{#        function parse(spec) {#}
{#          vg.parse.spec(spec, function(chart) { chart({el:"#vis"}).update(); });#}
{#        }#}
{#        parse("{% static 'js/time_chart.json' %}");#}
{#        </script>#}

    {% else %}
        <div class="row">
            <div class="col-sm-3 pull-right">
                <p class="lead text-align-center">Sign Up Now</p>

                <form method="POST" action="">{% csrf_token %}
                    {{ form|crispy }}
                    <input class="btn  btn-primary" type="submit" value="Sign Up"/>
</form>
            </div>
            <div class="col-sm-3">
                <p class="lead text-align-center">Platform</p>
                <img src="{% static 'img/Platform logo.png' %}" class="img-responsive"/>
            </div>
            <div class="col-sm-3">
                <p class="lead text-align-center">User based ratings
                    <br/>
                    <br/>
                <span class="rating">
          <span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span><span
                        class="star"></span>
            </span>
                    <br/>
                    <br/>
                    <i class="fa fa-bar-chart fa-5x"></i>
                </p>
            </div>
            <div class="col-sm-3">
                <p class="lead text-align-center">Advanced analytics
                    <br/>
                <span class="fa-stack fa-lg fa-5x">
{#                    <i class="fa fa-cog fa-stack-2x fa-spin"></i>#}
                    <i class="fa fa-cog fa-stack-2x"></i>
                    </span>
                </p>
            </div>
        </div>

    {% endif %}
{% endblock %}